import{S as Qe,i as We,s as Xe,k as m,v as re,a as $,q as I,l as p,m as d,w as ue,h as i,c as w,r as k,n as o,b as X,E as l,x as ce,M as le,F as he,N as Ye,u as se,f as Q,t as W,y as ie,C as Ze,G as Ge,o as Ue,e as ze,g as xe,d as et,A as Je}from"../../../../chunks/index-646e022c.js";import{S as tt}from"../../../../chunks/Spinner-036b3cfb.js";import{g as lt,u as st,i as at}from"../../../../chunks/navigation-ab624de0.js";import{B as Se,u as Be}from"../../../../chunks/Button-3d0a8f75.js";import{U as nt}from"../../../../chunks/UserCircle-fca8d711.js";function ot(n){let t;return{c(){t=I(n[3])},l(e){t=k(e,n[3])},m(e,s){X(e,t,s)},p(e,s){s&8&&se(t,e[3])},d(e){e&&i(t)}}}function rt(n){let t;return{c(){t=I("Update")},l(e){t=k(e,"Update")},m(e,s){X(e,t,s)},i:Je,o:Je,d(e){e&&i(t)}}}function ut(n){let t,e;return t=new tt({}),{c(){re(t.$$.fragment)},l(s){ue(t.$$.fragment,s)},m(s,c){ce(t,s,c),e=!0},i(s){e||(Q(t.$$.fragment,s),e=!0)},o(s){W(t.$$.fragment,s),e=!1},d(s){ie(t,s)}}}function ct(n){let t,e,s,c;const V=[ut,rt],a=[];function E(u,h){return u[0]?0:1}return t=E(n),e=a[t]=V[t](n),{c(){e.c(),s=ze()},l(u){e.l(u),s=ze()},m(u,h){a[t].m(u,h),X(u,s,h),c=!0},p(u,h){let D=t;t=E(u),t!==D&&(xe(),W(a[D],1,1,()=>{a[D]=null}),et(),e=a[t],e||(e=a[t]=V[t](u),e.c()),Q(e,1),e.m(s.parentNode,s))},i(u){c||(Q(e),c=!0)},o(u){W(e),c=!1},d(u){a[t].d(u),u&&i(s)}}}function it(n){let t;return{c(){t=I("Cancel")},l(e){t=k(e,"Cancel")},m(e,s){X(e,t,s)},d(e){e&&i(t)}}}function ft(n){let t;return{c(){t=I("Delete")},l(e){t=k(e,"Delete")},m(e,s){X(e,t,s)},d(e){e&&i(t)}}}function Ke(n){let t,e;return{c(){t=m("div"),e=I(n[5]),this.h()},l(s){t=p(s,"DIV",{class:!0});var c=d(t);e=k(c,n[5]),c.forEach(i),this.h()},h(){o(t,"class","error svelte-oqwn8o")},m(s,c){X(s,t,c),l(t,e)},p(s,c){c&32&&se(e,s[5])},d(s){s&&i(t)}}}function mt(n){let t,e,s,c,V,a,E,u,h,D,C,y,Y,ae,f,S,ne,Z,v,fe,ve,H,O,ge,be,U,A,$e,M,j,we,Ee,x,L,qe,P,G,Ie,ke,ee,q,De,me,Ae,N,T,Le,B,ye,F,Ve,R,Ce,Fe;c=new nt({props:{$$slots:{default:[ot]},$$scope:{ctx:n}}}),T=new Se({props:{class:"bg-green-300 hover:bg-green-400",type:"submit",$$slots:{default:[ct]},$$scope:{ctx:n}}}),B=new Se({props:{class:"ml-4 border-gray-300 hover:border-gray-400",type:"button",$$slots:{default:[it]},$$scope:{ctx:n}}}),B.$on("click",n[7]),F=new Se({props:{class:"bg-red-400 hover:bg-red-500 ml-4",type:"button",$$slots:{default:[ft]},$$scope:{ctx:n}}}),F.$on("click",n[8]);let g=n[5]&&Ke(n);return{c(){t=m("section"),e=m("div"),s=m("div"),re(c.$$.fragment),V=$(),a=m("div"),E=m("h3"),u=I(n[1]),h=$(),D=I(n[2]),C=$(),y=m("small"),Y=I(n[4]),ae=$(),f=m("form"),S=m("h1"),ne=I("Edit user: "),Z=I(n[1]),v=$(),fe=m("hr"),ve=$(),H=m("div"),O=m("label"),ge=I("First name"),be=$(),U=m("div"),A=m("input"),$e=$(),M=m("div"),j=m("label"),we=I("Last name"),Ee=$(),x=m("div"),L=m("input"),qe=$(),P=m("div"),G=m("label"),Ie=I("Email"),ke=$(),ee=m("div"),q=m("input"),De=$(),me=m("hr"),Ae=$(),N=m("div"),re(T.$$.fragment),Le=$(),re(B.$$.fragment),ye=$(),re(F.$$.fragment),Ve=$(),g&&g.c(),this.h()},l(r){t=p(r,"SECTION",{class:!0});var _=d(t);e=p(_,"DIV",{class:!0});var z=d(e);s=p(z,"DIV",{});var oe=d(s);ue(c.$$.fragment,oe),oe.forEach(i),V=w(z),a=p(z,"DIV",{class:!0});var J=d(a);E=p(J,"H3",{});var K=d(E);u=k(K,n[1]),h=w(K),D=k(K,n[2]),K.forEach(i),C=w(J),y=p(J,"SMALL",{});var He=d(y);Y=k(He,n[4]),He.forEach(i),J.forEach(i),z.forEach(i),ae=w(_),f=p(_,"FORM",{class:!0});var b=d(f);S=p(b,"H1",{class:!0});var Ne=d(S);ne=k(Ne,"Edit user: "),Z=k(Ne,n[1]),Ne.forEach(i),v=w(b),fe=p(b,"HR",{class:!0}),ve=w(b),H=p(b,"DIV",{class:!0});var pe=d(H);O=p(pe,"LABEL",{for:!0,class:!0});var Me=d(O);ge=k(Me,"First name"),Me.forEach(i),be=w(pe),U=p(pe,"DIV",{class:!0});var Pe=d(U);A=p(Pe,"INPUT",{id:!0,name:!0,autocomplete:!0,class:!0}),Pe.forEach(i),pe.forEach(i),$e=w(b),M=p(b,"DIV",{class:!0});var _e=d(M);j=p(_e,"LABEL",{for:!0,class:!0});var Te=d(j);we=k(Te,"Last name"),Te.forEach(i),Ee=w(_e),x=p(_e,"DIV",{class:!0});var Re=d(x);L=p(Re,"INPUT",{id:!0,name:!0,autocomplete:!0,class:!0}),Re.forEach(i),_e.forEach(i),qe=w(b),P=p(b,"DIV",{class:!0});var de=d(P);G=p(de,"LABEL",{for:!0,class:!0});var Oe=d(G);Ie=k(Oe,"Email"),Oe.forEach(i),ke=w(de),ee=p(de,"DIV",{class:!0});var je=d(ee);q=p(je,"INPUT",{id:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0,class:!0}),je.forEach(i),de.forEach(i),De=w(b),me=p(b,"HR",{class:!0}),Ae=w(b),N=p(b,"DIV",{class:!0});var te=d(N);ue(T.$$.fragment,te),Le=w(te),ue(B.$$.fragment,te),ye=w(te),ue(F.$$.fragment,te),te.forEach(i),Ve=w(b),g&&g.l(b),b.forEach(i),_.forEach(i),this.h()},h(){o(a,"class","mx-4 flex-col justify-between items-center"),o(e,"class","flex mr-8 overflow-hidden"),o(S,"class","text-5xl font-bold flex items-center"),o(fe,"class","svelte-oqwn8o"),o(O,"for","account-first-name"),o(O,"class","svelte-oqwn8o"),A.required=!0,o(A,"id","account-first-name"),o(A,"name","first-name"),o(A,"autocomplete","on"),o(A,"class","svelte-oqwn8o"),o(U,"class","input svelte-oqwn8o"),o(H,"class","field svelte-oqwn8o"),o(j,"for","account-last-name"),o(j,"class","svelte-oqwn8o"),L.required=!0,o(L,"id","account-last-name"),o(L,"name","last-name"),o(L,"autocomplete","on"),o(L,"class","svelte-oqwn8o"),o(x,"class","input svelte-oqwn8o"),o(M,"class","field svelte-oqwn8o"),o(G,"for","account-email"),o(G,"class","svelte-oqwn8o"),q.required=!0,o(q,"id","account-email"),o(q,"type","email"),o(q,"name","email"),o(q,"autocomplete","on"),o(q,"placeholder","Email"),o(q,"class","svelte-oqwn8o"),o(ee,"class","input svelte-oqwn8o"),o(P,"class","field svelte-oqwn8o"),o(me,"class","svelte-oqwn8o"),o(N,"class","buttons"),o(f,"class","w-full items-center"),o(t,"class","p-4 h-full m-auto flex lg:container md:p-16 md:pt-16 xs:p-8 rounded-2xl")},m(r,_){X(r,t,_),l(t,e),l(e,s),ce(c,s,null),l(e,V),l(e,a),l(a,E),l(E,u),l(E,h),l(E,D),l(a,C),l(a,y),l(y,Y),l(t,ae),l(t,f),l(f,S),l(S,ne),l(S,Z),l(f,v),l(f,fe),l(f,ve),l(f,H),l(H,O),l(O,ge),l(H,be),l(H,U),l(U,A),le(A,n[1]),l(f,$e),l(f,M),l(M,j),l(j,we),l(M,Ee),l(M,x),l(x,L),le(L,n[2]),l(f,qe),l(f,P),l(P,G),l(G,Ie),l(P,ke),l(P,ee),l(ee,q),le(q,n[4]),l(f,De),l(f,me),l(f,Ae),l(f,N),ce(T,N,null),l(N,Le),ce(B,N,null),l(N,ye),ce(F,N,null),l(f,Ve),g&&g.m(f,null),R=!0,Ce||(Fe=[he(A,"input",n[11]),he(L,"input",n[12]),he(q,"input",n[13]),he(f,"submit",Ye(n[6]))],Ce=!0)},p(r,[_]){const z={};_&65544&&(z.$$scope={dirty:_,ctx:r}),c.$set(z),(!R||_&2)&&se(u,r[1]),(!R||_&4)&&se(D,r[2]),(!R||_&16)&&se(Y,r[4]),(!R||_&2)&&se(Z,r[1]),_&2&&A.value!==r[1]&&le(A,r[1]),_&4&&L.value!==r[2]&&le(L,r[2]),_&16&&q.value!==r[4]&&le(q,r[4]);const oe={};_&65537&&(oe.$$scope={dirty:_,ctx:r}),T.$set(oe);const J={};_&65536&&(J.$$scope={dirty:_,ctx:r}),B.$set(J);const K={};_&65536&&(K.$$scope={dirty:_,ctx:r}),F.$set(K),r[5]?g?g.p(r,_):(g=Ke(r),g.c(),g.m(f,null)):g&&(g.d(1),g=null)},i(r){R||(Q(c.$$.fragment,r),Q(T.$$.fragment,r),Q(B.$$.fragment,r),Q(F.$$.fragment,r),R=!0)},o(r){W(c.$$.fragment,r),W(T.$$.fragment,r),W(B.$$.fragment,r),W(F.$$.fragment,r),R=!1},d(r){r&&i(t),ie(c),ie(T),ie(B),ie(F),g&&g.d(),Ce=!1,Ze(Fe)}}}function pt(n,t,e){let s,c;Ge(n,st,v=>e(15,s=v)),Ge(n,at,v=>e(10,c=v));let{data:V}=t,a;Ue(async()=>{const v=await Be.getUser(V.user_id);"data"in v&&(a=v.data,e(1,u=a==null?void 0:a.firstname),e(2,h=a==null?void 0:a.lastname),e(3,D=`${(u||"").charAt(0)}${(h||"").charAt(0)}`.toUpperCase()),e(4,C=a==null?void 0:a.email),e(5,y=null))});let E=!1,u=a==null?void 0:a.firstname,h=a==null?void 0:a.lastname,D=`${(u||"").charAt(0)}${(h||"").charAt(0)}`.toUpperCase(),C=a==null?void 0:a.email,y=null;async function Y(){if(s===null){e(5,y="Not logged in");return}e(0,E=!0);const v=await Be.editUser(s.id,{firstname:u,lastname:h,email:C});e(0,E=!1),"err"in v?e(5,y=v.err):e(5,y=null)}function ae(){e(1,u=a==null?void 0:a.firstname),e(2,h=a==null?void 0:a.lastname),e(3,D=`${(u||"").charAt(0)}${(h||"").charAt(0)}`.toUpperCase()),e(4,C=a==null?void 0:a.email)}async function f(){confirm("Are you sure you want to delete this account?")&&s&&Be.deleteUser(s.id)}function S(){u=this.value,e(1,u)}function ne(){h=this.value,e(2,h)}function Z(){C=this.value,e(4,C)}return n.$$set=v=>{"data"in v&&e(9,V=v.data)},n.$$.update=()=>{n.$$.dirty&1024&&typeof window<"u"&&!c&&lt("/login")},[E,u,h,D,C,y,Y,ae,f,V,c,S,ne,Z]}class bt extends Qe{constructor(t){super(),We(this,t,pt,mt,Xe,{data:9})}}export{bt as default};
